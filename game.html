<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ğŸš€ Ø¨Ø§Ø²ÛŒ Ø§Ù†ÙØ¬Ø§Ø± Ø³Ù‡â€ŒØ¨Ø¹Ø¯ÛŒ Ù†Ø¦ÙˆÙ†ÛŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin: 0; overflow: hidden; background: #1a1a1a; font-family: Arial, sans-serif; }
  #startBtn {
    position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
    padding: 15px 30px; font-size: 24px; border: none; border-radius: 10px;
    background: linear-gradient(45deg, #8a2be2, #a64bf4); color: #fff; cursor: pointer;
    box-shadow: 0 0 20px #8a2be2;
  }
  #multiplier {
    position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
    font-size: 48px; color: #a64bf4; text-shadow: 0 0 20px #8a2be2;
  }
</style>
</head>
<body>
<div id="multiplier">1.00x</div>
<button id="startBtn">ğŸš€ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Ù†ÙˆØ± Ù†Ø¦ÙˆÙ†ÛŒ
let light = new THREE.PointLight(0x8a2be2, 2, 500);
light.position.set(0,0,50);
scene.add(light);

// Ù…ÙˆØ´Ú© Ø³Ù‡â€ŒØ¨Ø¹Ø¯ÛŒ
let rocketGeometry = new THREE.ConeGeometry(0.5, 2, 32);
let rocketMaterial = new THREE.MeshStandardMaterial({
  color: 0xa64bf4, emissive: 0x8a2be2, emissiveIntensity: 0.8
});
let rocket = new THREE.Mesh(rocketGeometry, rocketMaterial);
scene.add(rocket);
rocket.position.y = -5;

// Ø°Ø±Ø§Øª Ù†ÙˆØ± Ø§Ø·Ø±Ø§Ù Ù…ÙˆØ´Ú©
let particleGeometry = new THREE.SphereGeometry(0.05, 8, 8);
let particleMaterial = new THREE.MeshBasicMaterial({color: 0x8a2be2});
let particles = [];
for(let i=0;i<50;i++){
  let p = new THREE.Mesh(particleGeometry, particleMaterial);
  p.position.set((Math.random()-0.5), (Math.random()-0.5), (Math.random()-0.5));
  scene.add(p);
  particles.push(p);
}

camera.position.z = 5;

let multiplierDiv = document.getElementById('multiplier');
let startBtn = document.getElementById('startBtn');
let multiplier = 1.0;
let crash = 0;

function animate() {
  requestAnimationFrame(animate);
  rocket.rotation.y += 0.02;
  particles.forEach(p => {
    p.position.y += 0.05;
    if(p.position.y > 5) p.position.y = -5;
  });
  renderer.render(scene, camera);
}
animate();

// Ø§Ø±Ø³Ø§Ù„ Ù†ØªÛŒØ¬Ù‡ Ø¨Ù‡ Ø±Ø¨Ø§Øª
function sendResultToBot(result, amount){
  if(window.Telegram?.WebApp){
    Telegram.WebApp.sendData(JSON.stringify({result, amount}));
  }
}

startBtn.onclick = () => {
  multiplier = 1.0;
  multiplierDiv.innerText = multiplier.toFixed(2) + "x";
  crash = Math.random() * 3 + 1; // Ø¶Ø±ÛŒØ¨ Ø§Ù†ÙØ¬Ø§Ø± 1 ØªØ§ 4
  startBtn.disabled = true;
  rocket.position.y = -5;

  const interval = setInterval(()=>{
    multiplier += 0.01;
    multiplierDiv.innerText = multiplier.toFixed(2) + "x";
    rocket.position.y += 0.05;

    // Ø¬Ù„ÙˆÙ‡ Ø°Ø±Ø§Øª Ø³Ø±ÛŒØ¹â€ŒØªØ± Ù‡Ù†Ú¯Ø§Ù… Ø­Ø±Ú©Øª Ù…ÙˆØ´Ú©
    particles.forEach(p=>{
      p.position.x += (Math.random()-0.5)*0.02;
      p.position.z += (Math.random()-0.5)*0.02;
    });

    if(multiplier.toFixed(2) >= crash){
      clearInterval(interval);
      multiplierDiv.innerText = "ğŸ’¥ Ø§Ù†ÙØ¬Ø§Ø± Ø¯Ø± " + crash.toFixed(2) + "x";

      // Ø¨Ø±Ø¯ ÛŒØ§ Ø¨Ø§Ø®Øª
      if(multiplier >= 2){
        sendResultToBot("win", Math.round(100*crash));
      } else {
        sendResultToBot("lose", 100);
      }

      startBtn.disabled = false;
    }
  },50);
};
</script>
</body>
</html>
