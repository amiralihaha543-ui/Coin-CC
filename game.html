<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸš€ Space Crash</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at top,#0b1a2e,#050d1a);
    color:white;
    overflow:hidden;
}

/* Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ */
body:before{
    content:"";
    position:absolute;
    width:100%;
    height:100%;
    background:url("https://www.transparenttextures.com/patterns/stardust.png");
    opacity:0.3;
}

/* Ø¶Ø±ÛŒØ¨ Ø¨Ø§Ù„Ø§ */
#multiplier{
    position:absolute;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    font-size:40px;
    font-weight:bold;
    text-shadow:0 0 20px #00bfff;
}

/* Ù…ÙˆØ´Ú© */
.rocket{
    position:absolute;
    top:35%;
    left:50%;
    transform:translateX(-50%);
    font-size:90px;
    animation: float 2s ease-in-out infinite alternate;
}

@keyframes float{
    from{transform:translate(-50%,0px);}
    to{transform:translate(-50%,-20px);}
}

/* Ø¯Ú©Ù…Ù‡ Ø´Ø±Ø· */
.bet-btn{
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    width:90%;
    background:#2f6fff;
    border:none;
    padding:18px;
    border-radius:15px;
    font-size:20px;
    color:white;
}

/* Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø¯Ø§Ø´Øª */
.cash-btn{
    position:absolute;
    bottom:90px;
    left:50%;
    transform:translateX(-50%);
    width:90%;
    background:#00c853;
    border:none;
    padding:15px;
    border-radius:15px;
    font-size:18px;
    color:white;
}
</style>
</head>

<body>

<div id="multiplier">1.00x</div>

<div class="rocket">ğŸš€</div>

<button id="cashBtn" class="cash-btn" onclick="cashOut()" disabled>
ğŸ’° Ø¨Ø±Ø¯Ø§Ø´Øª Ù¾ÙˆÙ„
</button>

<button id="betBtn" class="bet-btn" onclick="startGame()">
ğŸ¯ Ø´Ø±Ø· Ø¨Ù†Ø¯ÛŒ
</button>

<script>
let multiplier = 1;
let running = false;
let crashed = false;
let cashedOut = false;
let crashPoint = 0;
let betAmount = 100;
let interval;

function startGame(){
    if(running) return;

    running = true;
    crashed = false;
    cashedOut = false;
    multiplier = 1;
    crashPoint = Math.random()*3 + 1;

    document.getElementById("multiplier").innerText = "1.00x";
    document.getElementById("betBtn").innerText = "â³ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±ÙˆØ§Ø²...";
    document.getElementById("cashBtn").disabled = false;

    interval = setInterval(()=>{
        multiplier += 0.02;
        document.getElementById("multiplier").innerText =
            multiplier.toFixed(2)+"x";

        if(multiplier >= crashPoint){
            clearInterval(interval);
            crashed = true;
            running = false;

            document.getElementById("multiplier").innerText =
                "ğŸ’¥ Ø§Ù†ÙØ¬Ø§Ø± Ø¯Ø± " + crashPoint.toFixed(2)+"x";

            document.getElementById("betBtn").innerText = "ğŸ¯ Ø´Ø±Ø· Ø¨Ù†Ø¯ÛŒ";
            document.getElementById("cashBtn").disabled = true;

            if(!cashedOut){
                sendToBot("lose", betAmount);
            }
        }
    },50);
}

function cashOut(){
    if(!running || crashed || cashedOut) return;

    cashedOut = true;
    running = false;
    clearInterval(interval);

    let winAmount = Math.floor(betAmount * multiplier);

    document.getElementById("multiplier").innerText =
        "âœ… Ø¨Ø±Ø¯Ø§Ø´Øª Ø¯Ø± " + multiplier.toFixed(2)+"x";

    document.getElementById("betBtn").innerText = "ğŸ¯ Ø´Ø±Ø· Ø¨Ù†Ø¯ÛŒ";
    document.getElementById("cashBtn").disabled = true;

    sendToBot("win", winAmount);
}

function sendToBot(result, amount){
    if(window.Telegram?.WebApp){
        Telegram.WebApp.sendData(
            JSON.stringify({result, amount})
        );
    }
}
</script>

</body>
</html>
